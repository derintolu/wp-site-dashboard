(()=>{"use strict";var e={n:a=>{var s=a&&a.__esModule?()=>a.default:()=>a;return e.d(s,{a:s}),s},d:(a,s)=>{for(var t in s)e.o(s,t)&&!e.o(a,t)&&Object.defineProperty(a,t,{enumerable:!0,get:s[t]})},o:(e,a)=>Object.prototype.hasOwnProperty.call(e,a)};const a=window.wp.element,s=window.wp.components,t=window.wp.i18n,d=window.wp.apiFetch;var r=e.n(d);const i=window.ReactJSXRuntime,{siteDashboardAdmin:o}=window,n={dashboard:(0,t.__)("Dashboard","site-dashboard"),"admin-home":(0,t.__)("Home","site-dashboard"),"admin-site":(0,t.__)("Site","site-dashboard"),cart:(0,t.__)("Shopping Cart","site-dashboard"),store:(0,t.__)("Store","site-dashboard"),products:(0,t.__)("Products","site-dashboard"),money:(0,t.__)("Money","site-dashboard"),bank:(0,t.__)("Bank","site-dashboard"),"admin-users":(0,t.__)("Users","site-dashboard"),groups:(0,t.__)("Groups","site-dashboard"),businessman:(0,t.__)("Business Person","site-dashboard"),"buddicons-buddypress-logo":(0,t.__)("Community","site-dashboard"),"chart-pie":(0,t.__)("Pie Chart","site-dashboard"),"chart-bar":(0,t.__)("Bar Chart","site-dashboard"),"chart-line":(0,t.__)("Line Chart","site-dashboard"),"chart-area":(0,t.__)("Area Chart","site-dashboard"),analytics:(0,t.__)("Analytics","site-dashboard"),performance:(0,t.__)("Performance","site-dashboard"),"admin-settings":(0,t.__)("Settings","site-dashboard"),"admin-tools":(0,t.__)("Tools","site-dashboard"),"admin-generic":(0,t.__)("Generic Admin","site-dashboard"),"admin-network":(0,t.__)("Network","site-dashboard"),"controls-repeat":(0,t.__)("Controls","site-dashboard"),"admin-page":(0,t.__)("Pages","site-dashboard"),"admin-post":(0,t.__)("Posts","site-dashboard"),"admin-media":(0,t.__)("Media","site-dashboard"),"admin-links":(0,t.__)("Links","site-dashboard"),"admin-comments":(0,t.__)("Comments","site-dashboard"),"admin-appearance":(0,t.__)("Appearance","site-dashboard"),"admin-plugins":(0,t.__)("Plugins","site-dashboard"),email:(0,t.__)("Email","site-dashboard"),"email-alt":(0,t.__)("Newsletter","site-dashboard"),phone:(0,t.__)("Phone","site-dashboard"),megaphone:(0,t.__)("Megaphone","site-dashboard"),bell:(0,t.__)("Notifications","site-dashboard"),feedback:(0,t.__)("Feedback","site-dashboard"),location:(0,t.__)("Location","site-dashboard"),"location-alt":(0,t.__)("Location Alt","site-dashboard"),migrate:(0,t.__)("Transfer","site-dashboard"),"arrow-up":(0,t.__)("Arrow Up","site-dashboard"),"arrow-down":(0,t.__)("Arrow Down","site-dashboard"),"arrow-left":(0,t.__)("Arrow Left","site-dashboard"),"arrow-right":(0,t.__)("Arrow Right","site-dashboard"),calendar:(0,t.__)("Calendar","site-dashboard"),"calendar-alt":(0,t.__)("Calendar Alt","site-dashboard"),clock:(0,t.__)("Clock","site-dashboard"),schedule:(0,t.__)("Schedule","site-dashboard"),"star-filled":(0,t.__)("Star Filled","site-dashboard"),"star-empty":(0,t.__)("Star Empty","site-dashboard"),heart:(0,t.__)("Heart","site-dashboard"),lightbulb:(0,t.__)("Lightbulb","site-dashboard"),"thumbs-up":(0,t.__)("Thumbs Up","site-dashboard"),"thumbs-down":(0,t.__)("Thumbs Down","site-dashboard"),yes:(0,t.__)("Success","site-dashboard"),no:(0,t.__)("Error","site-dashboard"),warning:(0,t.__)("Warning","site-dashboard"),info:(0,t.__)("Info","site-dashboard"),marker:(0,t.__)("Marker","site-dashboard"),"media-document":(0,t.__)("Document","site-dashboard"),"media-archive":(0,t.__)("Archive","site-dashboard"),"media-code":(0,t.__)("Code","site-dashboard"),backup:(0,t.__)("Backup","site-dashboard"),database:(0,t.__)("Database","site-dashboard"),"custom-svg":(0,t.__)("Custom SVG","site-dashboard")},l={progress:(0,t.__)("Progress Widget","site-dashboard"),stats:(0,t.__)("Stats Widget","site-dashboard"),custom:(0,t.__)("Custom Widget","site-dashboard"),pattern:(0,t.__)("WordPress Pattern","site-dashboard")},h=()=>{const[e,d]=(0,a.useState)("dashboard"),[h,c]=(0,a.useState)({}),[_,b]=(0,a.useState)([]),[p,u]=(0,a.useState)([]),[m,g]=(0,a.useState)([]),[x,j]=(0,a.useState)(!0),[v,C]=(0,a.useState)(!1),[y,w]=(0,a.useState)(null),[f,k]=(0,a.useState)(!1),[S,N]=(0,a.useState)(null),[B,P]=(0,a.useState)({});(0,a.useEffect)((()=>{D()}),[]);const D=async()=>{try{j(!0);let e=[];try{e=(await r()({path:"/wp/v2/portal-pages",method:"GET",data:{per_page:100,status:"publish",orderby:"title",order:"asc"}})).map((e=>({id:e.id,title:e.title.rendered,slug:e.slug})))}catch(a){console.warn("Portal pages not available yet:",a),e=[]}g(e);const[a,s,t]=await Promise.all([r()({path:"/site-dashboard/v1/settings"}).catch((e=>(console.error("Settings API error:",e),{general:{}}))),r()({path:"/site-dashboard/v1/menu-items"}).catch((e=>(console.error("Menu items API error:",e),[]))),r()({path:"/site-dashboard/v1/widgets"}).catch((e=>(console.error("Widgets API error:",e),[])))]);c(a.general||{}),b(s||[]),u(t||[]),P(a.general?.custom_svgs||{})}catch(e){console.error("Load data error:",e),w({type:"error",message:(0,t.__)("Failed to load some data. The plugin may still be initializing. Please refresh and try again.","site-dashboard")})}finally{j(!1)}},T=async()=>{try{C(!0);const e={...h,custom_svgs:B};await r()({path:"/site-dashboard/v1/settings",method:"POST",data:{general:e}}),w({type:"success",message:(0,t.__)("Settings saved successfully!","site-dashboard")})}catch(e){w({type:"error",message:(0,t.__)("Failed to save settings","site-dashboard")})}finally{C(!1)}},M=async()=>{try{C(!0),await r()({path:"/site-dashboard/v1/menu-items",method:"POST",data:_}),w({type:"success",message:(0,t.__)("Menu items saved successfully!","site-dashboard")})}catch(e){w({type:"error",message:(0,t.__)("Failed to save menu items","site-dashboard")})}finally{C(!1)}},A=async()=>{try{C(!0),await r()({path:"/site-dashboard/v1/widgets",method:"POST",data:p}),w({type:"success",message:(0,t.__)("Widgets saved successfully!","site-dashboard")})}catch(e){w({type:"error",message:(0,t.__)("Failed to save widgets","site-dashboard")})}finally{C(!1)}},W=()=>{b([..._,{page_id:"",title:"",icon:"",custom_route:"",order:_.length,children:[]}])},L=(e,a,s)=>{const t=[..._];if(t[e][a]=s,"page_id"===a&&s){const a=m.find((e=>e.id.toString()===s.toString()));a&&!t[e].title&&(t[e].title=a.title)}b(t)},R=({value:e,onChange:d,itemIndex:r})=>{const[o,l]=(0,a.useState)(!1);return(0,i.jsxs)(s.__experimentalVStack,{spacing:3,children:[(0,i.jsx)(s.SelectControl,{label:(0,t.__)("Icon","site-dashboard"),value:e,options:[{label:(0,t.__)("No icon","site-dashboard"),value:""},...Object.entries(n).map((([e,a])=>({label:a,value:e}))),...Object.entries(B).map((([e,a])=>({label:`${a.name} (Custom)`,value:`custom-${e}`})))],onChange:e=>{"custom-svg"===e?l(!0):d(e)}}),e&&(0,i.jsxs)("div",{className:"icon-preview",children:[(0,i.jsx)("label",{children:(0,t.__)("Icon Preview:","site-dashboard")}),(0,i.jsxs)("div",{className:"icon-preview-display",children:[e.startsWith("custom-")?(0,i.jsx)("img",{src:B[e.replace("custom-","")]?.url,alt:"Custom icon",style:{width:"24px",height:"24px"}}):(0,i.jsx)(s.Dashicon,{icon:e,size:24}),(0,i.jsx)("span",{children:n[e]||B[e.replace("custom-","")]?.name})]})]}),(0,i.jsx)(s.MediaUploadCheck,{children:(0,i.jsx)(s.MediaUpload,{onSelect:e=>{const a=`item-${r}-${Date.now()}`;((e,a)=>{if(e&&e.url&&e.url.endsWith(".svg")){const s={...B,[a]:{url:e.url,name:e.title||e.filename}};P(s)}})(e,a),d(`custom-${a}`),l(!1)},allowedTypes:["image"],value:null,render:({open:e})=>(0,i.jsx)(s.Button,{onClick:e,variant:"secondary",icon:"upload",children:(0,t.__)("Upload Custom SVG","site-dashboard")})})}),o&&(0,i.jsx)(s.Notice,{status:"info",isDismissible:!1,children:(0,i.jsx)("p",{children:(0,t.__)("Please upload an SVG file for your custom icon. SVG files work best for crisp, scalable icons.","site-dashboard")})})]})},U=()=>(0,i.jsxs)("div",{className:"portal-admin-dashboard",children:[(0,i.jsx)("div",{className:"portal-admin-header",children:(0,i.jsxs)("div",{children:[(0,i.jsx)("h1",{children:(0,t.__)("Portal Dashboard","site-dashboard")}),(0,i.jsx)("p",{children:(0,t.__)("Configure your portal settings, navigation menu, and sidebar widgets.","site-dashboard")})]})}),(0,i.jsxs)("div",{className:"portal-admin-grid",children:[(0,i.jsxs)(s.Card,{children:[(0,i.jsx)(s.CardHeader,{children:(0,i.jsxs)("h2",{children:[(0,i.jsx)(s.Dashicon,{icon:"admin-settings"})," ",(0,t.__)("Portal Settings","site-dashboard")]})}),(0,i.jsxs)(s.CardBody,{children:[(0,i.jsx)("p",{children:(0,t.__)("Configure portal appearance, colors, and behavior settings.","site-dashboard")}),(0,i.jsx)(s.Button,{variant:"secondary",onClick:()=>d("settings"),children:(0,t.__)("Manage Settings","site-dashboard")})]})]}),(0,i.jsxs)(s.Card,{children:[(0,i.jsx)(s.CardHeader,{children:(0,i.jsxs)("h2",{children:[(0,i.jsx)(s.Dashicon,{icon:"menu"})," ",(0,t.__)("Navigation Menu","site-dashboard")]})}),(0,i.jsxs)(s.CardBody,{children:[(0,i.jsx)("p",{children:(0,t.__)("Assign WordPress pages to appear in the sidebar navigation with custom icons.","site-dashboard")}),(0,i.jsxs)("div",{className:"menu-stats",children:[(0,i.jsx)("strong",{children:_.length})," ",(0,t.__)("menu items configured","site-dashboard")]}),(0,i.jsx)(s.Button,{variant:"secondary",onClick:()=>d("menu"),children:(0,t.__)("Manage Navigation","site-dashboard")})]})]}),(0,i.jsxs)(s.Card,{children:[(0,i.jsx)(s.CardHeader,{children:(0,i.jsxs)("h2",{children:[(0,i.jsx)(s.Dashicon,{icon:"admin-plugins"})," ",(0,t.__)("Sidebar Widgets","site-dashboard")]})}),(0,i.jsxs)(s.CardBody,{children:[(0,i.jsx)("p",{children:(0,t.__)("Create progress bars, stats displays, and custom widgets for the sidebar.","site-dashboard")}),(0,i.jsxs)("div",{className:"widget-stats",children:[(0,i.jsx)("strong",{children:p.length})," ",(0,t.__)("widgets created","site-dashboard")]}),(0,i.jsx)(s.Button,{variant:"secondary",onClick:()=>d("widgets"),children:(0,t.__)("Manage Widgets","site-dashboard")})]})]})]})]}),I=()=>(0,i.jsxs)("div",{className:"portal-admin-settings",children:[(0,i.jsxs)("div",{className:"portal-admin-header",children:[(0,i.jsxs)(s.Button,{variant:"tertiary",onClick:()=>d("dashboard"),style:{marginBottom:"16px"},children:["← ",(0,t.__)("Back to Dashboard","site-dashboard")]}),(0,i.jsx)("h1",{children:(0,t.__)("Portal Settings","site-dashboard")})]}),(0,i.jsxs)("div",{className:"settings-sections",children:[(0,i.jsxs)(s.Card,{children:[(0,i.jsx)(s.CardHeader,{children:(0,i.jsx)("h2",{children:(0,t.__)("General Settings","site-dashboard")})}),(0,i.jsxs)(s.CardBody,{children:[(0,i.jsx)(s.TextControl,{label:(0,t.__)("Portal Title","site-dashboard"),value:h.portal_title||"",onChange:e=>c({...h,portal_title:e}),help:(0,t.__)("The title displayed in the sidebar header.","site-dashboard")}),(0,i.jsx)(s.ToggleControl,{label:(0,t.__)("Show Search Bar","site-dashboard"),checked:!1!==h.show_search,onChange:e=>c({...h,show_search:e}),help:(0,t.__)("Display search functionality in the top header.","site-dashboard")}),(0,i.jsx)(s.ToggleControl,{label:(0,t.__)("Show Notifications","site-dashboard"),checked:!1!==h.show_notifications,onChange:e=>c({...h,show_notifications:e}),help:(0,t.__)("Display notification bell in the top header.","site-dashboard")}),(0,i.jsx)(s.ToggleControl,{label:(0,t.__)("Enable Dark Mode Toggle","site-dashboard"),checked:!1!==h.enable_dark_mode,onChange:e=>c({...h,enable_dark_mode:e}),help:(0,t.__)("Allow users to toggle between light and dark themes.","site-dashboard")}),(0,i.jsx)("hr",{style:{margin:"24px 0"}}),(0,i.jsx)("h3",{children:(0,t.__)("Portal Routing","site-dashboard")}),(0,i.jsx)(s.TextControl,{label:(0,t.__)("Portal Base Route","site-dashboard"),value:h.portal_route||"portal",onChange:e=>c({...h,portal_route:e}),help:(0,t.__)('The base URL path for the portal (e.g., "portal" creates /portal). Leave empty to disable frontend routing.',"site-dashboard"),placeholder:"portal"}),(0,i.jsx)(s.TextControl,{label:(0,t.__)("Dashboard Page Route","site-dashboard"),value:h.dashboard_route||"dashboard",onChange:e=>c({...h,dashboard_route:e}),help:(0,t.__)('The route for the main dashboard page (e.g., "dashboard" creates /portal/dashboard).',"site-dashboard"),placeholder:"dashboard"}),(0,i.jsx)(s.ToggleControl,{label:(0,t.__)("Enable Custom URLs","site-dashboard"),checked:!1!==h.enable_custom_urls,onChange:e=>c({...h,enable_custom_urls:e}),help:(0,t.__)("Allow each menu item to have a custom URL route instead of using page IDs.","site-dashboard")}),h.portal_route&&(0,i.jsxs)(s.Notice,{status:"info",isDismissible:!1,children:[(0,i.jsxs)("p",{children:[(0,i.jsx)("strong",{children:(0,t.__)("Current Portal URLs:","site-dashboard")}),(0,i.jsx)("br",{}),"• ",(0,t.__)("Main Portal:","site-dashboard")," ",(0,i.jsxs)("code",{children:["/",h.portal_route]}),(0,i.jsx)("br",{}),"• ",(0,t.__)("Dashboard:","site-dashboard")," ",(0,i.jsxs)("code",{children:["/",h.portal_route,"/",h.dashboard_route||"dashboard"]}),(0,i.jsx)("br",{}),"• ",(0,t.__)("Pages:","site-dashboard")," ",(0,i.jsxs)("code",{children:["/",h.portal_route,"/[page-route]"]})]}),(0,i.jsx)("p",{style:{marginTop:"12px",fontSize:"14px",color:"#646970"},children:(0,t.__)("Note: After changing routes, visit Settings > Permalinks to flush rewrite rules.","site-dashboard")})]})]})]}),(0,i.jsxs)(s.Card,{children:[(0,i.jsx)(s.CardHeader,{children:(0,i.jsx)("h2",{children:(0,t.__)("Color Scheme","site-dashboard")})}),(0,i.jsx)(s.CardBody,{children:(0,i.jsxs)("div",{className:"color-controls",children:[(0,i.jsxs)("div",{className:"color-control",children:[(0,i.jsx)("label",{children:(0,t.__)("Primary Color","site-dashboard")}),(0,i.jsx)(s.ColorPicker,{color:h.primary_color||"#2271b1",onChange:e=>c({...h,primary_color:e})}),(0,i.jsx)("p",{className:"description",children:(0,t.__)("Used for buttons, active states, and accents.","site-dashboard")})]}),(0,i.jsxs)("div",{className:"color-control",children:[(0,i.jsx)("label",{children:(0,t.__)("Sidebar Background","site-dashboard")}),(0,i.jsx)(s.ColorPicker,{color:h.sidebar_background||"#ffffff",onChange:e=>c({...h,sidebar_background:e})}),(0,i.jsx)("p",{className:"description",children:(0,t.__)("Background color for the left sidebar.","site-dashboard")})]}),(0,i.jsxs)("div",{className:"color-control",children:[(0,i.jsx)("label",{children:(0,t.__)("Header Background","site-dashboard")}),(0,i.jsx)(s.ColorPicker,{color:h.header_background||"#ffffff",onChange:e=>c({...h,header_background:e})}),(0,i.jsx)("p",{className:"description",children:(0,t.__)("Background color for the top header.","site-dashboard")})]}),(0,i.jsxs)("div",{className:"color-control",children:[(0,i.jsx)("label",{children:(0,t.__)("Content Background","site-dashboard")}),(0,i.jsx)(s.ColorPicker,{color:h.content_background||"#f0f0f1",onChange:e=>c({...h,content_background:e})}),(0,i.jsx)("p",{className:"description",children:(0,t.__)("Background color for the main content area.","site-dashboard")})]})]})})]}),(0,i.jsx)("div",{className:"save-section",children:(0,i.jsx)(s.Button,{variant:"primary",onClick:T,isBusy:v,disabled:v,children:v?(0,t.__)("Saving...","site-dashboard"):(0,t.__)("Save Settings","site-dashboard")})})]})]}),O=()=>(0,i.jsxs)("div",{className:"portal-admin-menu",children:[(0,i.jsxs)("div",{className:"portal-admin-header",children:[(0,i.jsxs)(s.Button,{variant:"tertiary",onClick:()=>d("dashboard"),style:{marginBottom:"16px"},children:["← ",(0,t.__)("Back to Dashboard","site-dashboard")]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("h1",{children:(0,t.__)("Navigation Menu","site-dashboard")}),(0,i.jsx)("p",{children:(0,t.__)("Configure the sidebar navigation menu with portal pages and icons.","site-dashboard")}),0===m.length&&(0,i.jsx)(s.Notice,{status:"info",isDismissible:!1,children:(0,i.jsxs)("p",{children:[(0,t.__)("No portal pages found. ","site-dashboard"),(0,i.jsx)("a",{href:`${o.adminUrl}edit.php?post_type=portal_page`,target:"_blank",children:(0,t.__)("Create your first portal page","site-dashboard")}),(0,t.__)(" to get started with navigation.","site-dashboard")]})})]}),(0,i.jsxs)(s.__experimentalHStack,{children:[(0,i.jsxs)(s.Button,{variant:"secondary",href:`${o.adminUrl}edit.php?post_type=portal_page`,target:"_blank",children:[(0,i.jsx)(s.Dashicon,{icon:"admin-page"})," ",(0,t.__)("Manage Portal Pages","site-dashboard")]}),(0,i.jsxs)(s.Button,{variant:"primary",onClick:W,disabled:0===m.length,children:[(0,i.jsx)(s.Dashicon,{icon:"plus"})," ",(0,t.__)("Add Menu Item","site-dashboard")]})]})]}),(0,i.jsx)("div",{className:"menu-items-list",children:_.map(((e,a)=>(0,i.jsx)(s.Card,{className:"menu-item-card",children:(0,i.jsx)(s.CardBody,{children:(0,i.jsxs)("div",{className:"menu-item-controls",children:[(0,i.jsx)(s.SelectControl,{label:(0,t.__)("Portal Page","site-dashboard"),value:e.page_id,options:[{label:(0,t.__)("Select a portal page...","site-dashboard"),value:""},...m.map((e=>({label:e.title,value:e.id})))],onChange:e=>L(a,"page_id",e),help:(0,t.__)("Choose a portal page to display when this menu item is clicked.","site-dashboard")}),(0,i.jsx)(s.TextControl,{label:(0,t.__)("Menu Title","site-dashboard"),value:e.title,onChange:e=>L(a,"title",e),help:(0,t.__)("Override the page title in navigation.","site-dashboard")}),(0,i.jsx)(R,{value:e.icon,onChange:e=>L(a,"icon",e),itemIndex:a}),(0,i.jsx)(s.__experimentalNumberControl,{label:(0,t.__)("Order","site-dashboard"),value:e.order||0,onChange:e=>L(a,"order",parseInt(e))}),h.enable_custom_urls&&(0,i.jsx)(s.TextControl,{label:(0,t.__)("Custom Route","site-dashboard"),value:e.custom_route||"",onChange:e=>L(a,"custom_route",e),help:(0,t.__)('Custom URL path for this page (e.g., "my-page" creates /portal/my-page). Leave empty to use page ID.',"site-dashboard"),placeholder:"custom-page-url"}),(0,i.jsx)("div",{className:"menu-item-actions",children:(0,i.jsxs)(s.Button,{variant:"secondary",isDestructive:!0,onClick:()=>(e=>{const a=_.filter(((a,s)=>s!==e));b(a)})(a),children:[(0,i.jsx)(s.Dashicon,{icon:"trash"})," ",(0,t.__)("Remove","site-dashboard")]})})]})})},a)))}),0===_.length&&(0,i.jsx)("div",{className:"empty-state",children:(0,i.jsx)("p",{children:(0,t.__)("No menu items configured yet. Add your first menu item to get started.","site-dashboard")})}),(0,i.jsx)("div",{className:"save-section",children:(0,i.jsx)(s.Button,{variant:"primary",onClick:M,isBusy:v,disabled:v,children:v?(0,t.__)("Saving...","site-dashboard"):(0,t.__)("Save Menu Items","site-dashboard")})})]}),E=()=>(0,i.jsxs)("div",{className:"portal-admin-widgets",children:[(0,i.jsxs)("div",{className:"portal-admin-header",children:[(0,i.jsxs)(s.Button,{variant:"tertiary",onClick:()=>d("dashboard"),style:{marginBottom:"16px"},children:["← ",(0,t.__)("Back to Dashboard","site-dashboard")]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("h1",{children:(0,t.__)("Sidebar Widgets","site-dashboard")}),(0,i.jsx)("p",{children:(0,t.__)("Create and manage widgets that appear in the sidebar below the navigation.","site-dashboard")})]}),(0,i.jsxs)(s.Button,{variant:"primary",onClick:()=>k(!0),children:[(0,i.jsx)(s.Dashicon,{icon:"plus"})," ",(0,t.__)("Create Widget","site-dashboard")]})]}),(0,i.jsx)("div",{className:"widgets-grid",children:p.map((e=>(0,i.jsxs)(s.Card,{className:"widget-card",children:[(0,i.jsxs)(s.CardHeader,{children:[(0,i.jsx)("h3",{children:e.title}),(0,i.jsx)("span",{className:"widget-type",children:l[e.type]})]}),(0,i.jsxs)(s.CardBody,{children:[(0,i.jsx)("p",{children:e.subtitle||e.description||(0,t.__)("No description","site-dashboard")}),"progress"===e.type&&(0,i.jsxs)("div",{className:"widget-preview",children:[(0,i.jsx)("div",{className:"progress-preview",children:(0,i.jsx)("div",{style:{width:`${e.percentage||35}%`,height:"8px",background:"#2271b1",borderRadius:"4px"}})}),(0,i.jsxs)("small",{children:[e.percentage||35,"% complete"]})]}),(0,i.jsxs)("div",{className:"widget-actions",children:[(0,i.jsxs)(s.Button,{variant:"secondary",size:"small",onClick:()=>{N(e),k(!0)},children:[(0,i.jsx)(s.Dashicon,{icon:"edit"})," ",(0,t.__)("Edit","site-dashboard")]}),(0,i.jsxs)(s.Button,{variant:"secondary",size:"small",isDestructive:!0,onClick:()=>(e=>{const a=p.filter((a=>a.id!==e));u(a)})(e.id),children:[(0,i.jsx)(s.Dashicon,{icon:"trash"})," ",(0,t.__)("Delete","site-dashboard")]})]})]})]},e.id)))}),0===p.length&&(0,i.jsx)("div",{className:"empty-state",children:(0,i.jsx)("p",{children:(0,t.__)("No widgets created yet. Add your first widget to enhance the sidebar.","site-dashboard")})}),(0,i.jsx)("div",{className:"save-section",children:(0,i.jsx)(s.Button,{variant:"primary",onClick:A,isBusy:v,disabled:v,children:v?(0,t.__)("Saving...","site-dashboard"):(0,t.__)("Save Widgets","site-dashboard")})})]}),H=()=>{const[e,d]=(0,a.useState)(S||{type:"progress",title:"",subtitle:"",percentage:35,content:"",button_text:"",button_link:""});return(0,i.jsx)(s.Modal,{title:S?(0,t.__)("Edit Widget","site-dashboard"):(0,t.__)("Create Widget","site-dashboard"),onRequestClose:()=>{k(!1),N(null)},className:"widget-modal",children:(0,i.jsxs)("div",{className:"widget-form",children:[(0,i.jsx)(s.SelectControl,{label:(0,t.__)("Widget Type","site-dashboard"),value:e.type,options:Object.entries(l).map((([e,a])=>({value:e,label:a}))),onChange:a=>d({...e,type:a})}),(0,i.jsx)(s.TextControl,{label:(0,t.__)("Widget Title","site-dashboard"),value:e.title,onChange:a=>d({...e,title:a})}),(0,i.jsx)(s.TextControl,{label:(0,t.__)("Subtitle","site-dashboard"),value:e.subtitle,onChange:a=>d({...e,subtitle:a})}),"progress"===e.type&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(s.RangeControl,{label:(0,t.__)("Progress Percentage","site-dashboard"),value:e.percentage||35,onChange:a=>d({...e,percentage:a}),min:0,max:100}),(0,i.jsx)(s.TextControl,{label:(0,t.__)("Button Text","site-dashboard"),value:e.button_text,onChange:a=>d({...e,button_text:a})}),(0,i.jsx)(s.TextControl,{label:(0,t.__)("Button Link","site-dashboard"),value:e.button_link,onChange:a=>d({...e,button_link:a})})]}),("stats"===e.type||"custom"===e.type)&&(0,i.jsx)(s.TextareaControl,{label:(0,t.__)("Content","site-dashboard"),value:e.content,onChange:a=>d({...e,content:a}),help:(0,t.__)("HTML content for the widget.","site-dashboard")}),(0,i.jsxs)("div",{className:"modal-actions",children:[(0,i.jsx)(s.Button,{variant:"primary",onClick:()=>{S?(e=>{const a=p.map((a=>a.id===S.id?{...S,...e}:a));u(a),k(!1),N(null)})(e):(e=>{const a={id:Date.now(),order:p.length,...e};u([...p,a]),k(!1),N(null)})(e)},children:S?(0,t.__)("Update Widget","site-dashboard"):(0,t.__)("Create Widget","site-dashboard")}),(0,i.jsx)(s.Button,{variant:"secondary",onClick:()=>{k(!1),N(null)},children:(0,t.__)("Cancel","site-dashboard")})]})]})})};return x?(0,i.jsxs)("div",{className:"portal-admin-loading",children:[(0,i.jsx)(s.Spinner,{}),(0,i.jsx)("p",{children:(0,t.__)("Loading...","site-dashboard")})]}):(0,i.jsxs)("div",{className:"portal-admin-app",children:[y&&(0,i.jsx)(s.Notice,{status:y.type,onRemove:()=>w(null),dismissible:!0,children:y.message}),"dashboard"===e&&(0,i.jsx)(U,{}),"settings"===e&&(0,i.jsx)(I,{}),"menu"===e&&(0,i.jsx)(O,{}),"widgets"===e&&(0,i.jsx)(E,{}),f&&(0,i.jsx)(H,{})]})};document.addEventListener("DOMContentLoaded",(()=>{const e=document.getElementById("site-dashboard-admin-root");e&&(0,a.render)((0,i.jsx)(h,{}),e)}))})();